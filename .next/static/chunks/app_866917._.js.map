{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/components/Nav/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { useToken } from \"../../context/token_context\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport { UserCircleIcon, ChevronDownIcon, ArrowRightOnRectangleIcon, LifebuoyIcon } from \"@heroicons/react/24/outline\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function MinimalNavbar() {\r\n    const { userData, logOut } = useToken();\r\n    const { saveData } = useLoginClient();\r\n    const [dropOpen, setDropOpen] = useState(false);\r\n    const dropRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (e) => {\r\n        if (dropRef.current && !dropRef.current.contains(e.target)) {\r\n            setDropOpen(false);\r\n        }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <nav className=\"relative p-4 text-black shadow-md backdrop-blur-sm\">\r\n        <div className=\"container mx-auto flex justify-between items-center\">\r\n            {/* Logo */}\r\n            <Link href=\"/\" className=\"text-xl font-bold  flex items-center\">\r\n            <span className=\"inline-block w-5 h-5 mr-2  rounded-full\" />\r\n            logo\r\n            </Link>\r\n\r\n            {/* Right section */}\r\n            <div className={`lg:flex lg:items-center lg:w-auto  w-full lg:block mt-4 lg:mt-0`} ref={dropRef}>\r\n                {userData ? (\r\n                    <>\r\n                    <div className=\"flex gap-4 font-medium px-2\">\r\n                        <Link href=\"/requests\" className=\" hover:text-green-400 px-3 py-1 rounded\">Requests</Link>\r\n                        <Link href=\"/inbox\" className=\"hover:text-green-400 px-3 py-1 rounded\">Inbox</Link>\r\n                    </div>\r\n\r\n                    <div className=\"relative ml-4\">\r\n                        <button\r\n                        onClick={() => setDropOpen(!dropOpen)}\r\n                        className=\"flex items-center bg-green-500 text-white px-4 py-2 rounded-md hover:bg-opacity-90 focus:outline-none\"\r\n                        >\r\n                        <UserCircleIcon className=\"h-5 w-5\" />\r\n                        <span className=\"ml-2\">{saveData.displayName.split(' ')[0]}</span>\r\n                        <ChevronDownIcon className={`h-4 w-4 ml-1 transform transition-transform ${dropOpen ? 'rotate-180' : ''}`} />\r\n                        </button>\r\n\r\n                        {dropOpen && (\r\n                        <div className=\"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999] overflow-hidden text-black\">\r\n                            <Link href=\"/account\" className=\"flex items-center px-4 py-2 hover:bg-gray-100\">\r\n                            <UserCircleIcon className=\"h-5 w-5 mr-2 text-gray-600\" /> Account\r\n                            </Link>\r\n                            <Link href=\"/support\" className=\"flex items-center px-4 py-2 bg-green-50 hover:bg-green-100\">\r\n                            <LifebuoyIcon className=\"h-5 w-5 mr-2 text-green-600\" /> Support\r\n                            </Link>\r\n                            <button\r\n                            onClick={logOut}\r\n                            className=\"w-full text-left flex items-center px-4 py-2 hover:bg-gray-100\"\r\n                            >\r\n                            <ArrowRightOnRectangleIcon className=\"h-5 w-5 mr-2 text-gray-600\" /> Log out\r\n                            </button>\r\n                        </div>\r\n                        )}\r\n                    </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"flex items-center justify-center space-x-4\">\r\n                    <Link href=\"/login\" className=\"px-4 py-2 border text-white rounded-md hover:bg-gray-100\">\r\n                        Login\r\n                    </Link>\r\n                    <Link href=\"/signup\" className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\">\r\n                        Sign Up\r\n                    </Link>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n        </nav>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AADA;AAAA;AAAA;AAAA;;;AAJA;;;;;;AAOe,SAAS;;IACpB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,WAAQ,AAAD;IACpC,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD;IAClC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACN,MAAM;8DAAqB,CAAC;oBAC5B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAG;wBACxD,YAAY;oBAChB;gBACA;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;2CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QAC3D;kCAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;kBACf,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC,+JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACzB,6LAAC;4BAAK,WAAU;;;;;;wBAA4C;;;;;;;8BAK5D,6LAAC;oBAAI,WAAW,CAAC,+DAA+D,CAAC;oBAAE,KAAK;8BACnF,yBACG;;0CACA,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAY,WAAU;kDAA0C;;;;;;kDAC3E,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAS,WAAU;kDAAyC;;;;;;;;;;;;0CAG3E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACD,SAAS,IAAM,YAAY,CAAC;wCAC5B,WAAU;;0DAEV,6LAAC,8NAAA,CAAA,iBAAc;gDAAC,WAAU;;;;;;0DAC1B,6LAAC;gDAAK,WAAU;0DAAQ,SAAS,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;0DAC1D,6LAAC,gOAAA,CAAA,kBAAe;gDAAC,WAAW,CAAC,4CAA4C,EAAE,WAAW,eAAe,IAAI;;;;;;;;;;;;oCAGxG,0BACD,6LAAC;wCAAI,WAAU;;0DACX,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAW,WAAU;;kEAChC,6LAAC,8NAAA,CAAA,iBAAc;wDAAC,WAAU;;;;;;oDAA+B;;;;;;;0DAEzD,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAW,WAAU;;kEAChC,6LAAC,0NAAA,CAAA,eAAY;wDAAC,WAAU;;;;;;oDAAgC;;;;;;;0DAExD,6LAAC;gDACD,SAAS;gDACT,WAAU;;kEAEV,6LAAC,oPAAA,CAAA,4BAAyB;wDAAC,WAAU;;;;;;oDAA+B;;;;;;;;;;;;;;;;;;;;qDAO5E,6LAAC;wBAAI,WAAU;;0CACf,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAS,WAAU;0CAA2D;;;;;;0CAGzF,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAU,WAAU;0CAAkE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrH;GA5EwB;;QACS,mIAAA,CAAA,WAAQ;QAChB,+IAAA,CAAA,iBAAc;;;KAFf"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/account/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useLoginClient } from \"../context/regester/login_context\";\r\nimport {\r\n  FaUserCircle,\r\n  FaBell,\r\n  FaLock,\r\n  FaWallet,\r\n  FaUser,\r\n  FaQuestionCircle,\r\n} from \"react-icons/fa\";\r\nimport Image from \"next/image\";\r\nimport Navbar from \"../components/Nav/page\";\r\n\r\nexport default function Account() {\r\n  const { saveData, updateProfilePicture } = useLoginClient();\r\n  const [profileImage, setProfileImage] = useState(null);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploadStatus, setUploadStatus] = useState(null);\r\n  const [uploadErrorMessage, setUploadErrorMessage] = useState(\"\");\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleUploadClick = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n      const previewUrl = URL.createObjectURL(file);\r\n      setProfileImage(previewUrl);\r\n      setUploadStatus(null);\r\n      setUploadErrorMessage(\"\");\r\n    }\r\n  };\r\n\r\n  const uploadProfilePictureToServer = async () => {\r\n    if (!selectedFile) return;\r\n\r\n    try {\r\n      const newUrl = await updateProfilePicture(selectedFile); // ✅ استخدام الدالة الجديدة\r\n      setUploadStatus(\"success\");\r\n      setUploadErrorMessage(\"\");\r\n      setProfileImage(newUrl); // ✅ تحديث الصورة في الواجهة\r\n      setSelectedFile(null);   // reset\r\n    } catch (error) {\r\n      console.error(\"Upload failed:\", error);\r\n      setUploadStatus(\"error\");\r\n      setUploadErrorMessage(error.message || \"حدث خطأ أثناء رفع الصورة.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (saveData?.profilePictureUrl) {\r\n      setProfileImage(saveData.profilePictureUrl);\r\n    }\r\n  }, [saveData?.profilePictureUrl]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (profileImage?.startsWith(\"blob:\")) {\r\n        URL.revokeObjectURL(profileImage);\r\n      }\r\n    };\r\n  }, [profileImage]);\r\n\r\n  if (!saveData) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 text-gray-800\">\r\n        <Navbar />\r\n        <p className=\"p-4\">Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 text-gray-800\">\r\n      <Navbar />\r\n      <div className=\"flex p-4 gap-6\">\r\n        {/* Left - Profile Card */}\r\n        <div className=\"bg-white rounded-lg shadow w-1/4 text-center py-6 px-4\">\r\n          {profileImage ? (\r\n            <Image\r\n              width={112}\r\n              height={112}\r\n              src={profileImage}\r\n              alt=\"Profile\"\r\n              className=\"w-28 h-28 mx-auto rounded-full object-cover\"\r\n            />\r\n          ) : (\r\n            <FaUserCircle className=\"text-gray-400 mx-auto text-7xl\" />\r\n          )}\r\n          <h2 className=\"text-lg font-semibold mt-4\">{saveData.displayName}</h2>\r\n          <p className=\"text-sm text-gray-500 mb-4\">{saveData.email}</p>\r\n\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref={fileInputRef}\r\n            onChange={handleImageChange}\r\n            className=\"hidden\"\r\n          />\r\n          <button\r\n            onClick={handleUploadClick}\r\n            className=\"border border-gray-300 px-4 py-2 text-sm rounded-md\"\r\n          >\r\n            Upload photo\r\n          </button>\r\n\r\n          {selectedFile && (\r\n            <div className=\"mt-3 space-y-2\">\r\n              <button\r\n                onClick={uploadProfilePictureToServer}\r\n                className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n              >\r\n                حفظ الصورة\r\n              </button>\r\n              {uploadStatus === \"success\" && (\r\n                <p className=\"text-green-600 text-sm\">✅ تم حفظ الصورة بنجاح</p>\r\n              )}\r\n              {uploadStatus === \"error\" && (\r\n                <p className=\"text-red-600 text-sm\">❌ {uploadErrorMessage}</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right - Info Boxes */}\r\n        <div className=\"flex-1 space-y-4\">\r\n          <InfoBox\r\n            icon={<FaUser />}\r\n            title=\"My profile\"\r\n            desc=\"Edit your profile picture, name, email, phone number, and Location\"\r\n            onClick={() => (window.location.href = \"/updateaccount\")}\r\n          />\r\n          <InfoBox\r\n            icon={<FaWallet />}\r\n            title=\"Safe\"\r\n            desc=\"Top up your account, check your balance, and manage your payment preferences.\"\r\n            onClick={() => (window.location.href = \"/payment\")}\r\n          />\r\n          <InfoBox\r\n            icon={<FaLock />}\r\n            title=\"Change password\"\r\n            desc=\"Update and manage your password.\"\r\n          />\r\n          <InfoBox icon={<FaQuestionCircle />} title=\"Help\" desc=\"Need help?\" />\r\n        </div>\r\n      </div>\r\n\r\n      <footer className=\"text-sm text-gray-500 text-center py-6 border-t\">\r\n        2025 Lilason, Inc. –{\" \"}\r\n        <a href=\"#\" className=\"underline\">\r\n          Terms of Use\r\n        </a>{\" \"}\r\n        –{\" \"}\r\n        <a href=\"#\" className=\"underline\">\r\n          Privacy Policy\r\n        </a>{\" \"}\r\n        –{\" \"}\r\n        <a href=\"#\" className=\"underline\">\r\n          Accessibility\r\n        </a>{\" \"}\r\n        –{\" \"}\r\n        <a href=\"#\" className=\"underline\">\r\n          Service Code\r\n        </a>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InfoBox({ icon, title, desc, onClick }) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"bg-white p-4 rounded shadow cursor-pointer hover:bg-gray-50\"\r\n    >\r\n      <div className=\"flex justify-between items-start gap-2\">\r\n        <div className=\"flex items-start gap-2\">\r\n          <div className=\"text-xl text-green-600\">{icon}</div>\r\n          <div>\r\n            <h3 className=\"font-semibold\">{title}</h3>\r\n            <p className=\"text-sm text-gray-600\">{desc}</p>\r\n          </div>\r\n        </div>\r\n        <span className=\"text-2xl text-gray-400\">›</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}